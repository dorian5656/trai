import{d as O,w as M,o as j,h as t,u as e,j as T,m as s,z as p,F as R,_ as V,k as J,D as m,p as K,r as k,E as Q,f as n,A as W,n as X}from"./index-DbCLWlye.js";import{c as Y,d as Z,M as ee,C as x,e as se,f as ie,g as oe}from"./MessageList-BEco268S.js";import{u as ne}from"./github-dark-BhRNdhYt.js";import{q as le,B as te}from"./_plugin-vue_export-helper-CZjV5n3s.js";import"./aria-jhYneGSC.js";const ae={class:"mobile-container"},re={class:"sidebar-header"},de={class:"user-info"},ce={key:0,class:"avatar"},ue=["src"],ge={key:1,class:"avatar"},ve={class:"username"},pe={class:"action-area"},me={class:"recent-chats"},ke=["onClick"],Se={class:"mobile-header"},be={class:"left"},he={class:"right"},_e={key:0,class:"user-actions"},fe={class:"mobile-content"},Ce={key:0,class:"chat-layout"},Fe={class:"chat-footer"},we={key:1,class:"welcome-wrapper"},ye={class:"input-area-wrapper"},Le={class:"skills-grid"},Me=["onClick"],Te=["innerHTML"],Re={class:"skill-label"},Ve=O({__name:"Home",setup(xe){const P=Q(),a=Y(),l=ne(),d=le(),{isListening:S,result:B,toggleListening:b}=Z(),{uploadedFiles:u,showViewer:D,previewUrlList:I,initialIndex:U,handleFileSelect:h,removeFile:_,handlePreview:f,closeViewer:G,clearFiles:H}=ie(),{allSkills:$,activeSkill:g,handleSkillClick:z,removeSkill:C}=oe(),c=k(""),F=k(null),v=k(!1);M(()=>l.messages,()=>{F.value?.scrollToBottom()},{deep:!0});const w=async()=>{const r=c.value.trim();if(!r&&u.value.length===0||l.isSending)return;const i=[...u.value],o=g.value;c.value="",H(),g.value=null,await l.sendMessage(r,i,o)},y=()=>{l.stopGenerating()},L=()=>{v.value=!v.value};M(B,r=>{r&&(c.value=r)}),j(()=>{d.init()});const A=()=>{P.push("/login")},E=()=>{d.logout()},N=r=>{r.label!=="ç›¸ä¼¼åº¦è¯†åˆ«"&&(z(r),X(()=>{const i=document.querySelector(".input-box input");i&&i.focus()}))};return(r,i)=>(n(),t("div",ae,[e(a).isMobileSidebarOpen?(n(),t("div",{key:0,class:"sidebar-mask",onClick:i[0]||(i[0]=(...o)=>e(a).closeMobileSidebar&&e(a).closeMobileSidebar(...o))})):T("",!0),s("aside",{class:J(["mobile-sidebar",{open:e(a).isMobileSidebarOpen}])},[s("div",re,[s("div",de,[e(d).avatar?(n(),t("div",ce,[s("img",{src:e(d).avatar,alt:"Avatar"},null,8,ue)])):(n(),t("div",ge,"ðŸ‘©â€ðŸ’»")),s("span",ve,p(e(d).isLoggedIn?e(d).username:"é©¼äººGPT"),1)]),s("button",{class:"close-btn",onClick:i[1]||(i[1]=(...o)=>e(a).closeMobileSidebar&&e(a).closeMobileSidebar(...o))},"âœ•")]),s("div",pe,[s("button",{class:"new-chat-btn",onClick:i[2]||(i[2]=o=>e(l).createSession())},"ðŸ“ æ–°å¯¹è¯")]),s("div",me,[i[7]||(i[7]=s("div",{class:"section-title"},"æœ€è¿‘å¯¹è¯",-1)),(n(!0),t(R,null,V(e(l).sessions,o=>(n(),t("div",{key:o.id,class:"chat-item",onClick:q=>{e(l).switchSession(o.id),e(a).closeMobileSidebar()}},p(o.title),9,ke))),128))]),i[8]||(i[8]=s("div",{class:"sidebar-footer"},[s("button",{class:"footer-btn"},"â„¹ï¸ å…³äºŽé©¼äººGPT")],-1))],2),s("header",Se,[s("div",be,[s("button",{class:"icon-btn",onClick:i[3]||(i[3]=(...o)=>e(a).toggleMobileSidebar&&e(a).toggleMobileSidebar(...o))},"â˜°"),s("button",{class:"new-chat-pill",onClick:i[4]||(i[4]=o=>e(l).createSession())},"ðŸ“ æ–°å¯¹è¯")]),s("div",he,[e(d).isLoggedIn?(n(),t("div",_e,[s("button",{class:"logout-btn",onClick:E},"é€€å‡º")])):(n(),t("button",{key:1,class:"login-btn",onClick:A},"ç™»å½•"))])]),s("main",fe,[e(l).messages.length>0?(n(),t("div",Ce,[m(ee,{messages:e(l).messages,ref_key:"messageListRef",ref:F},null,8,["messages"]),s("div",Fe,[m(x,{modelValue:c.value,"onUpdate:modelValue":i[5]||(i[5]=o=>c.value=o),"is-sending":e(l).isSending,"is-deep-thinking":v.value,"active-skill":e(g),"uploaded-files":e(u),"is-listening":e(S),onSend:w,onStop:y,onToggleDeepThink:L,onToggleListening:e(b),onRemoveSkill:e(C),onFileSelect:e(h),onRemoveFile:e(_),onPreviewFile:e(f)},null,8,["modelValue","is-sending","is-deep-thinking","active-skill","uploaded-files","is-listening","onToggleListening","onRemoveSkill","onFileSelect","onRemoveFile","onPreviewFile"])])])):(n(),t("div",we,[i[9]||(i[9]=s("h1",{class:"greeting"},"ä½ å¥½ï¼Œæˆ‘æ˜¯é©¼äººGPT",-1)),s("div",ye,[m(x,{modelValue:c.value,"onUpdate:modelValue":i[6]||(i[6]=o=>c.value=o),"is-sending":e(l).isSending,"is-deep-thinking":v.value,"active-skill":e(g),"uploaded-files":e(u),"is-listening":e(S),onSend:w,onStop:y,onToggleDeepThink:L,onToggleListening:e(b),onRemoveSkill:e(C),onFileSelect:e(h),onRemoveFile:e(_),onPreviewFile:e(f)},null,8,["modelValue","is-sending","is-deep-thinking","active-skill","uploaded-files","is-listening","onToggleListening","onRemoveSkill","onFileSelect","onRemoveFile","onPreviewFile"])]),s("div",Le,[(n(!0),t(R,null,V(e($),o=>(n(),t("div",{key:o.label,class:"skill-item",onClick:q=>N(o)},[s("div",{class:"skill-icon-wrapper",style:W({color:o.color})},[s("span",{class:"skill-icon",innerHTML:o.icon},null,8,Te)],4),s("span",Re,p(o.label),1)],8,Me))),128))])]))]),e(D)?(n(),K(e(se),{key:1,"url-list":e(I),"initial-index":e(U),onClose:e(G)},null,8,["url-list","initial-index","onClose"])):T("",!0)]))}}),Ge=te(Ve,[["__scopeId","data-v-f41b1af8"]]);export{Ge as default};
