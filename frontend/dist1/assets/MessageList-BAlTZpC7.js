import{o as pe,L as Le,r as b,l as J,d as oe,w as D,u as a,n as he,i as vt,J as pt,f as m,p as _e,a4 as gt,Y as wt,a7 as mt,c as A,a8 as $e,a9 as kt,q as $,D as S,S as qe,m as u,A as Ne,k as I,y as Ge,j as N,h as C,F as Me,H as yt,z as X,v as Ct,s as xt,aa as bt,a5 as _t,_ as Je,C as Oe}from"./index-CIckwfKF.js";import{aC as Et,am as ve,al as Tt,k as Ee,U as Se,Q as K,_ as Fe,n as Lt,b as Qe,e as Te,w as et,h as tt,aD as Mt,aE as St,aF as Ft,aG as It,i as Ve,m as Ht,aH as Rt,aI as Bt,a1 as $t,O as Nt,g as G,E as U,a9 as Ot,aJ as Vt,aK as jt,aL as Pt,ab as At,aM as Dt,aN as zt,aO as Wt,aP as Ut,af as Yt,r as Z,ag as Kt,B as nt}from"./_plugin-vue_export-helper-BXN9oYHw.js";import{f as Xt,t as Zt}from"./aria-jhYneGSC.js";import{M as qt,H as je}from"./github-dark-DKyb6B-E.js";var Gt=/\s/;function Jt(e){for(var n=e.length;n--&&Gt.test(e.charAt(n)););return n}var Qt=/^\s+/;function en(e){return e&&e.slice(0,Jt(e)+1).replace(Qt,"")}var Pe=NaN,tn=/^[-+]0x[0-9a-f]+$/i,nn=/^0b[01]+$/i,on=/^0o[0-7]+$/i,sn=parseInt;function Ae(e){if(typeof e=="number")return e;if(Et(e))return Pe;if(ve(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=ve(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=en(e);var t=nn.test(e);return t||on.test(e)?sn(e.slice(2),t?2:8):tn.test(e)?Pe:+e}var Ce=function(){return Tt.Date.now()},rn="Expected a function",ln=Math.max,an=Math.min;function cn(e,n,t){var o,r,d,v,c,s,p=0,f=!1,w=!1,g=!0;if(typeof e!="function")throw new TypeError(rn);n=Ae(n)||0,ve(t)&&(f=!!t.leading,w="maxWait"in t,d=w?ln(Ae(t.maxWait)||0,n):d,g="trailing"in t?!!t.trailing:g);function E(x){var F=o,H=r;return o=r=void 0,p=x,v=e.apply(H,F),v}function i(x){return p=x,c=setTimeout(k,n),f?E(x):v}function h(x){var F=x-s,H=x-p,z=n-F;return w?an(z,d-H):z}function _(x){var F=x-s,H=x-p;return s===void 0||F>=n||F<0||w&&H>=d}function k(){var x=Ce();if(_(x))return M(x);c=setTimeout(k,h(x))}function M(x){return c=void 0,g&&o?E(x):(o=r=void 0,v)}function y(){c!==void 0&&clearTimeout(c),p=0,o=s=r=c=void 0}function Q(){return c===void 0?v:M(Ce())}function ee(){var x=Ce(),F=_(x);if(o=arguments,r=this,s=x,F){if(c===void 0)return i(s);if(w)return clearTimeout(c),c=setTimeout(k,n),E(s)}return c===void 0&&(c=setTimeout(k,n)),v}return ee.cancel=y,ee.flush=Q,ee}var un="Expected a function";function ae(e,n,t){var o=!0,r=!0;if(typeof e!="function")throw new TypeError(un);return ve(t)&&(o="leading"in t?!!t.leading:o,r="trailing"in t?!!t.trailing:r),cn(e,n,{leading:o,maxWait:n,trailing:r})}let ce;const dn=e=>{var n;if(!Ee)return 0;if(ce!==void 0)return ce;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const o=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const d=r.offsetWidth;return(n=t.parentNode)==null||n.removeChild(t),ce=o-d,ce},xe="focus-trap.focus-after-trapped",be="focus-trap.focus-after-released",fn="focus-trap.focusout-prevented",De={cancelable:!0,bubbles:!1},hn={cancelable:!0,bubbles:!1},ze="focusAfterTrapped",We="focusAfterReleased",vn=Symbol("elFocusTrap"),Ie=b(),ge=b(0),He=b(0);let ue=0;const ot=e=>{const n=[],t=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0||o===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)n.push(t.currentNode);return n},Ue=(e,n)=>{for(const t of e)if(!pn(t,n))return t},pn=(e,n)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},gn=e=>{const n=ot(e),t=Ue(n,e),o=Ue(n.reverse(),e);return[t,o]},wn=e=>e instanceof HTMLInputElement&&"select"in e,Y=(e,n)=>{if(e){const t=document.activeElement;Xt(e,{preventScroll:!0}),He.value=window.performance.now(),e!==t&&wn(e)&&n&&e.select()}};function Ye(e,n){const t=[...e],o=e.indexOf(n);return o!==-1&&t.splice(o,1),t}const mn=()=>{let e=[];return{push:o=>{const r=e[0];r&&o!==r&&r.pause(),e=Ye(e,o),e.unshift(o)},remove:o=>{var r,d;e=Ye(e,o),(d=(r=e[0])==null?void 0:r.resume)==null||d.call(r)}}},kn=(e,n=!1)=>{const t=document.activeElement;for(const o of e)if(Y(o,n),document.activeElement!==t)return},Ke=mn(),yn=()=>ge.value>He.value,de=()=>{Ie.value="pointer",ge.value=window.performance.now()},Xe=()=>{Ie.value="keyboard",ge.value=window.performance.now()},Cn=()=>(pe(()=>{ue===0&&(document.addEventListener("mousedown",de),document.addEventListener("touchstart",de),document.addEventListener("keydown",Xe)),ue++}),Le(()=>{ue--,ue<=0&&(document.removeEventListener("mousedown",de),document.removeEventListener("touchstart",de),document.removeEventListener("keydown",Xe))}),{focusReason:Ie,lastUserFocusTimestamp:ge,lastAutomatedFocusTimestamp:He}),fe=e=>new CustomEvent(fn,{...hn,detail:e});let ne=[];const Ze=e=>{Se(e)===K.esc&&ne.forEach(t=>t(e))},xn=e=>{pe(()=>{ne.length===0&&document.addEventListener("keydown",Ze),Ee&&ne.push(e)}),Le(()=>{ne=ne.filter(n=>n!==e),ne.length===0&&Ee&&document.removeEventListener("keydown",Ze)})},bn=oe({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ze,We,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:n}){const t=b();let o,r;const{focusReason:d}=Cn();xn(i=>{e.trapped&&!v.paused&&n("release-requested",i)});const v={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},c=i=>{if(!e.loop&&!e.trapped||v.paused)return;const{altKey:h,ctrlKey:_,metaKey:k,currentTarget:M,shiftKey:y}=i,{loop:Q}=e,x=Se(i)===K.tab&&!h&&!_&&!k,F=document.activeElement;if(x&&F){const H=M,[z,se]=gn(H);if(z&&se){if(!y&&F===se){const V=fe({focusReason:d.value});n("focusout-prevented",V),V.defaultPrevented||(i.preventDefault(),Q&&Y(z,!0))}else if(y&&[z,H].includes(F)){const V=fe({focusReason:d.value});n("focusout-prevented",V),V.defaultPrevented||(i.preventDefault(),Q&&Y(se,!0))}}else if(F===H){const V=fe({focusReason:d.value});n("focusout-prevented",V),V.defaultPrevented||i.preventDefault()}}};pt(vn,{focusTrapRef:t,onKeydown:c}),D(()=>e.focusTrapEl,i=>{i&&(t.value=i)},{immediate:!0}),D([t],([i],[h])=>{i&&(i.addEventListener("keydown",c),i.addEventListener("focusin",f),i.addEventListener("focusout",w)),h&&(h.removeEventListener("keydown",c),h.removeEventListener("focusin",f),h.removeEventListener("focusout",w))});const s=i=>{n(ze,i)},p=i=>n(We,i),f=i=>{const h=a(t);if(!h)return;const _=i.target,k=i.relatedTarget,M=_&&h.contains(_);e.trapped||k&&h.contains(k)||(o=k),M&&n("focusin",i),!v.paused&&e.trapped&&(M?r=_:Y(r,!0))},w=i=>{const h=a(t);if(!(v.paused||!h))if(e.trapped){const _=i.relatedTarget;!Lt(_)&&!h.contains(_)&&setTimeout(()=>{if(!v.paused&&e.trapped){const k=fe({focusReason:d.value});n("focusout-prevented",k),k.defaultPrevented||Y(r,!0)}},0)}else{const _=i.target;_&&h.contains(_)||n("focusout",i)}};async function g(){await he();const i=a(t);if(i){Ke.push(v);const h=i.contains(document.activeElement)?o:document.activeElement;if(o=h,!i.contains(h)){const k=new Event(xe,De);i.addEventListener(xe,s),i.dispatchEvent(k),k.defaultPrevented||he(()=>{let M=e.focusStartEl;vt(M)||(Y(M),document.activeElement!==M&&(M="first")),M==="first"&&kn(ot(i),!0),(document.activeElement===h||M==="container")&&Y(i)})}}}function E(){const i=a(t);if(i){i.removeEventListener(xe,s);const h=new CustomEvent(be,{...De,detail:{focusReason:d.value}});i.addEventListener(be,p),i.dispatchEvent(h),!h.defaultPrevented&&(d.value=="keyboard"||!yn()||i.contains(document.activeElement))&&Y(o??document.body),i.removeEventListener(be,p),Ke.remove(v),o=null,r=null}}return pe(()=>{e.trapped&&g(),D(()=>e.trapped,i=>{i?g():E()})}),Le(()=>{e.trapped&&E(),t.value&&(t.value.removeEventListener("keydown",c),t.value.removeEventListener("focusin",f),t.value.removeEventListener("focusout",w),t.value=void 0),o=null,r=null}),{onKeydown:c}}});function _n(e,n,t,o,r,d){return J(e.$slots,"default",{handleKeydown:e.onKeydown})}var En=Fe(bn,[["render",_n],["__file","focus-trap.vue"]]);const Tn=Qe({to:{type:Te([String,Object]),required:!0},disabled:Boolean}),Ln=oe({__name:"teleport",props:Tn,setup(e){return(n,t)=>n.disabled?J(n.$slots,"default",{key:0}):(m(),_e(gt,{key:1,to:n.to},[J(n.$slots,"default")],8,["to"]))}});var Mn=Fe(Ln,[["__file","teleport.vue"]]);const Sn=et(Mn),Fn=(e,n={})=>{wt(e)||Zt("[useLockscreen]","You need to pass a ref param to this function");const t=n.ns||tt("popup"),o=A(()=>t.bm("parent","hidden"));let r=0,d=!1,v="0";const c=()=>{setTimeout(()=>{typeof document>"u"||d&&document&&(document.body.style.width=v,It(document.body,o.value))},200)};D(e,s=>{if(!s){c();return}d=!Mt(document.body,o.value),d&&(v=document.body.style.width,St(document.body,o.value)),r=dn(t.namespace.value);const p=document.documentElement.clientHeight<document.body.scrollHeight,f=Ft(document.body,"overflowY");r>0&&(p||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${r}px)`)}),mt(()=>c())},In=Qe({urlList:{type:Te(Array),default:()=>Ht([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},scale:{type:Number,default:1},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:Boolean,crossorigin:{type:Te(String)}}),Hn={close:()=>!0,error:e=>e instanceof Event,switch:e=>Ve(e),rotate:e=>Ve(e)},Rn=oe({name:"ElImageViewer"}),Bn=oe({...Rn,props:In,emits:Hn,setup(e,{expose:n,emit:t}){var o;const r=e,d={CONTAIN:{name:"contain",icon:$e(Bt)},ORIGINAL:{name:"original",icon:$e(Rt)}};let v;const{t:c}=$t(),s=tt("image-viewer"),{nextZIndex:p}=Nt(),f=b(),w=b(),g=kt(),E=A(()=>{const{scale:l,minScale:L,maxScale:T}=r;return Ut(l,L,T)}),i=b(!0),h=b(!1),_=b(!1),k=b(r.initialIndex),M=xt(d.CONTAIN),y=b({scale:E.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),Q=b((o=r.zIndex)!=null?o:p());Fn(_,{ns:s});const ee=A(()=>{const{urlList:l}=r;return l.length<=1}),x=A(()=>k.value===0),F=A(()=>k.value===r.urlList.length-1),H=A(()=>r.urlList[k.value]),z=A(()=>[s.e("btn"),s.e("prev"),s.is("disabled",!r.infinite&&x.value)]),se=A(()=>[s.e("btn"),s.e("next"),s.is("disabled",!r.infinite&&F.value)]),Re=A(()=>{const{scale:l,deg:L,offsetX:T,offsetY:O,enableTransition:j}=y.value;let B=T/l,P=O/l;const te=L*Math.PI/180,q=Math.cos(te),re=Math.sin(te);B=B*q+P*re,P=P*q-T/l*re;const ye={transform:`scale(${l}) rotate(${L}deg) translate(${B}px, ${P}px)`,transition:j?"transform .3s":""};return M.value.name===d.CONTAIN.name&&(ye.maxWidth=ye.maxHeight="100%"),ye}),V=A(()=>`${k.value+1} / ${r.urlList.length}`);function ie(){it(),v?.(),_.value=!1,t("close")}function rt(){const l=ae(T=>{switch(Se(T)){case K.esc:r.closeOnPressEscape&&ie();break;case K.space:we();break;case K.left:me();break;case K.up:W("zoomIn");break;case K.right:ke();break;case K.down:W("zoomOut");break}}),L=ae(T=>{const O=T.deltaY||T.deltaX;W(O<0?"zoomIn":"zoomOut",{zoomRate:r.zoomRate,enableTransition:!1})});g.run(()=>{G(document,"keydown",l),G(f,"wheel",L)})}function it(){g.stop()}function lt(){i.value=!1}function at(l){h.value=!0,i.value=!1,t("error",l),l.target.alt=c("el.image.error")}function ct(l){if(i.value||l.button!==0||!f.value)return;y.value.enableTransition=!1;const{offsetX:L,offsetY:T}=y.value,O=l.pageX,j=l.pageY,B=ae(q=>{y.value={...y.value,offsetX:L+q.pageX-O,offsetY:T+q.pageY-j}}),P=G(document,"mousemove",B),te=G(document,"mouseup",()=>{P(),te()});l.preventDefault()}function ut(l){if(i.value||!f.value||l.touches.length!==1)return;y.value.enableTransition=!1;const{offsetX:L,offsetY:T}=y.value,{pageX:O,pageY:j}=l.touches[0],B=ae(q=>{const re=q.touches[0];y.value={...y.value,offsetX:L+re.pageX-O,offsetY:T+re.pageY-j}}),P=G(document,"touchmove",B),te=G(document,"touchend",()=>{P(),te()});l.preventDefault()}function Be(){y.value={scale:E.value,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function we(){if(i.value||h.value)return;const l=Wt(d),L=Object.values(d),T=M.value.name,j=(L.findIndex(B=>B.name===T)+1)%l.length;M.value=d[l[j]],Be()}function le(l){h.value=!1;const L=r.urlList.length;k.value=(l+L)%L}function me(){x.value&&!r.infinite||le(k.value-1)}function ke(){F.value&&!r.infinite||le(k.value+1)}function W(l,L={}){if(i.value||h.value)return;const{minScale:T,maxScale:O}=r,{zoomRate:j,rotateDeg:B,enableTransition:P}={zoomRate:r.zoomRate,rotateDeg:90,enableTransition:!0,...L};switch(l){case"zoomOut":y.value.scale>T&&(y.value.scale=Number.parseFloat((y.value.scale/j).toFixed(3)));break;case"zoomIn":y.value.scale<O&&(y.value.scale=Number.parseFloat((y.value.scale*j).toFixed(3)));break;case"clockwise":y.value.deg+=B,t("rotate",y.value.deg);break;case"anticlockwise":y.value.deg-=B,t("rotate",y.value.deg);break}y.value.enableTransition=P}function dt(l){var L;((L=l.detail)==null?void 0:L.focusReason)==="pointer"&&l.preventDefault()}function ft(){r.closeOnPressEscape&&ie()}function ht(l){if(l.ctrlKey){if(l.deltaY<0)return l.preventDefault(),!1;if(l.deltaY>0)return l.preventDefault(),!1}}return D(()=>E.value,l=>{y.value.scale=l}),D(H,()=>{he(()=>{const l=w.value;l?.complete||(i.value=!0)})}),D(k,l=>{Be(),t("switch",l)}),pe(()=>{_.value=!0,rt(),v=G("wheel",ht,{passive:!1})}),n({setActiveItem:le}),(l,L)=>(m(),_e(a(Sn),{to:"body",disabled:!l.teleported},{default:$(()=>[S(qe,{name:"viewer-fade",appear:""},{default:$(()=>[u("div",{ref_key:"wrapper",ref:f,tabindex:-1,class:I(a(s).e("wrapper")),style:Ne({zIndex:Q.value})},[S(a(En),{loop:"",trapped:"","focus-trap-el":f.value,"focus-start-el":"container",onFocusoutPrevented:dt,onReleaseRequested:ft},{default:$(()=>[u("div",{class:I(a(s).e("mask")),onClick:Ge(T=>l.hideOnClickModal&&ie(),["self"])},null,10,["onClick"]),N(" CLOSE "),u("span",{class:I([a(s).e("btn"),a(s).e("close")]),onClick:ie},[S(a(U),null,{default:$(()=>[S(a(Ot))]),_:1})],2),N(" ARROW "),a(ee)?N("v-if",!0):(m(),C(Me,{key:0},[u("span",{class:I(a(z)),onClick:me},[S(a(U),null,{default:$(()=>[S(a(Vt))]),_:1})],2),u("span",{class:I(a(se)),onClick:ke},[S(a(U),null,{default:$(()=>[S(a(jt))]),_:1})],2)],64)),l.$slots.progress||l.showProgress?(m(),C("div",{key:1,class:I([a(s).e("btn"),a(s).e("progress")])},[J(l.$slots,"progress",{activeIndex:k.value,total:l.urlList.length},()=>[yt(X(a(V)),1)])],2)):N("v-if",!0),N(" ACTIONS "),u("div",{class:I([a(s).e("btn"),a(s).e("actions")])},[u("div",{class:I(a(s).e("actions__inner"))},[J(l.$slots,"toolbar",{actions:W,prev:me,next:ke,reset:we,activeIndex:k.value,setActiveItem:le},()=>[S(a(U),{onClick:T=>W("zoomOut")},{default:$(()=>[S(a(Pt))]),_:1},8,["onClick"]),S(a(U),{onClick:T=>W("zoomIn")},{default:$(()=>[S(a(At))]),_:1},8,["onClick"]),u("i",{class:I(a(s).e("actions__divider"))},null,2),S(a(U),{onClick:we},{default:$(()=>[(m(),_e(Ct(a(M).icon)))]),_:1}),u("i",{class:I(a(s).e("actions__divider"))},null,2),S(a(U),{onClick:T=>W("anticlockwise")},{default:$(()=>[S(a(Dt))]),_:1},8,["onClick"]),S(a(U),{onClick:T=>W("clockwise")},{default:$(()=>[S(a(zt))]),_:1},8,["onClick"])])],2)],2),N(" CANVAS "),u("div",{class:I(a(s).e("canvas"))},[h.value&&l.$slots["viewer-error"]?J(l.$slots,"viewer-error",{key:0,activeIndex:k.value,src:a(H)}):(m(),C("img",{ref_key:"imgRef",ref:w,key:a(H),src:a(H),style:Ne(a(Re)),class:I(a(s).e("img")),crossorigin:l.crossorigin,onLoad:lt,onError:at,onMousedown:ct,onTouchstart:ut},null,46,["src","crossorigin"]))],2),J(l.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var $n=Fe(Bn,[["__file","image-viewer.vue"]]);const No=et($n),R={excel:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" fill="#217346"/>
    <path d="M14 2V8H20" fill="#E6E6E6"/>
    <path d="M16.5 17.5L14.5 14.5L16.5 11.5H14.2L13.2 13.3L12.2 11.5H10L12 14.5L10 17.5H12.3L13.3 15.7L14.3 17.5H16.5Z" fill="white"/>
  </svg>`,fileDefault:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" fill="#A0A0A0"/>
    <path d="M14 2V8H20" fill="#E6E6E6"/>
  </svg>`,audio:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" fill="#FFA000"/>
    <path d="M14 2V8H20" fill="#FFE082"/>
    <path d="M12 18V13M12 18C13.1046 18 14 17.1046 14 16C14 14.8954 13.1046 14 12 14C10.8954 14 10 14.8954 10 16C10 17.1046 10.8954 18 12 18ZM12 13V11L15 10V13" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,closeSmall:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <line x1="18" y1="6" x2="6" y2="18"></line>
    <line x1="6" y1="6" x2="18" y2="18"></line>
  </svg>`,closeTiny:`<svg width="100%" height="100%" viewBox="0 0 12 12" fill="none">
    <path d="M2.5 2.5L9.5 9.5M9.5 2.5L2.5 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
  </svg>`,attachment:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.44 11.05L12.25 20.24C11.1242 21.3658 9.59718 21.9983 8.00504 21.9983C6.41289 21.9983 4.88588 21.3658 3.76004 20.24C2.63419 19.1142 2.00171 17.5872 2.00171 15.995C2.00171 14.4029 2.63419 12.8759 3.76004 11.75L12.95 2.56003C13.7006 1.80946 14.7186 1.38782 15.78 1.38782C16.8415 1.38782 17.8595 1.80946 18.61 2.56003C19.3606 3.31061 19.7822 4.32863 19.7822 5.39003C19.7822 6.45143 19.3606 7.46946 18.61 8.22003L9.42004 17.41C9.04475 17.7853 8.53575 17.9961 8.00504 17.9961C7.47432 17.9961 6.96532 17.7853 6.59004 17.41C6.21475 17.0347 6.00394 16.5257 6.00394 15.995C6.00394 15.4643 6.21475 14.9553 6.59004 14.58L15.07 6.10003" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,deepThink:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M2 12H22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12 2C14.5013 4.73835 15.9228 8.29203 16 12C15.9228 15.708 14.5013 19.2616 12 22C9.49872 19.2616 8.07725 15.708 8 12C8.07725 8.29203 9.49872 4.73835 12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,micListening:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="6" y="6" width="12" height="12" fill="currentColor" rx="1"/>
  </svg>`,micNormal:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M19 10v2a7 7 0 0 1-14 0v-2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <line x1="12" y1="19" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <line x1="8" y1="23" x2="16" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,sendSending:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="2" y="2" width="20" height="20" fill="currentColor" rx="2"/>
  </svg>`,sendNormal:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12 19V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M5 12L12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,copy:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,regenerate:`<svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M23 4V10H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M1 20V14H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M3.51 9C4.01717 7.56678 4.87913 6.2854 6.01547 5.27542C7.1518 4.26544 8.52547 3.55977 10.0083 3.22486C11.4911 2.88994 13.0348 2.93678 14.4952 3.36094C15.9556 3.7851 17.2853 4.5727 18.36 5.65L23 10M1 14L5.64 18.35C6.71475 19.4273 8.04437 20.2149 9.50481 20.6391C10.9652 21.0632 12.5089 21.1101 13.9917 20.7751C15.4745 20.4402 16.8482 19.7346 17.9845 18.7246C19.1209 17.7146 19.9828 16.4332 20.49 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`},Oo=bt("app",()=>{const e=b(!0),n=b(!1);return{isSidebarOpen:e,isMobileSidebarOpen:n,toggleSidebar:()=>{e.value=!e.value},toggleMobileSidebar:()=>{n.value=!n.value},closeMobileSidebar:()=>{n.value=!1}}}),Nn=(e,n="common",t)=>{const o=new FormData;return o.append("file",e),o.append("module",n),Yt.post("/upload/common",o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r=>{if(r.total&&t){const d=Math.round(r.loaded*100/r.total);t(d)}}})};function Vo(){const e=b(!1),n=b(""),t=b("");let o=null;const r=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const s=window.SpeechRecognition||window.webkitSpeechRecognition;o=new s,o.continuous=!1,o.interimResults=!0,o.lang="zh-CN",o.onstart=()=>{e.value=!0,t.value=""},o.onresult=p=>{let f="",w="";for(let g=p.resultIndex;g<p.results.length;++g)p.results[g].isFinal?f+=p.results[g][0].transcript:w+=p.results[g][0].transcript;n.value=f||w},o.onerror=p=>{console.error("Speech recognition error",p.error),t.value=p.error,e.value=!1,p.error==="not-allowed"?Z.error("无法访问麦克风，请检查权限设置"):Z.error("语音识别出错: "+p.error)},o.onend=()=>{e.value=!1}}else Z.warning("您的浏览器不支持语音识别功能")},d=()=>{if(o||r(),o)try{n.value="",o.start()}catch(s){console.error(s)}},v=()=>{o&&(o.stop(),e.value=!1)},c=()=>{e.value?v():d()};return _t(()=>{o&&o.stop()}),{isListening:e,result:n,error:t,startListening:d,stopListening:v,toggleListening:c}}function jo(){const e=b([]),n=b(!1),t=b([]),o=b(0),r=f=>{if(f===0)return"0 B";const w=1024,g=["B","KB","MB","GB","TB"],E=Math.floor(Math.log(f)/Math.log(w));return parseFloat((f/Math.pow(w,E)).toFixed(1))+" "+g[E]};return{uploadedFiles:e,showViewer:n,previewUrlList:t,initialIndex:o,handleFileSelect:async f=>{const w=f.target;if(w.files&&w.files.length>0){const g=w.files[0];if(!g)return;const E={id:Date.now().toString(),name:g.name,size:r(g.size),type:g.type,progress:0,status:"uploading"};g.type.startsWith("image/")&&(E.url=URL.createObjectURL(g)),e.value.push(E),w.value="";const i=e.value.find(h=>h.id===E.id);try{const h=await Nn(g,"chat",_=>{i.progress=_});i.status="done",h.url&&(i.url=h.url),i.progress=100}catch(h){console.error("上传失败:",h),i.status="error";const _=Kt.handleHttpError(h);Z.error(`${i.name} 上传失败: ${_.message}`)}}},removeFile:f=>{const w=e.value.findIndex(g=>g.id===f);w!==-1&&e.value.splice(w,1)},handlePreview:f=>{if(f.url&&f.type.startsWith("image/")){const w=e.value.filter(E=>E.url&&E.type.startsWith("image/")).map(E=>E.url),g=w.indexOf(f.url);g!==-1&&(t.value=w,o.value=g,n.value=!0)}},closeViewer:()=>{n.value=!1},clearFiles:()=>{e.value=[]}}}function Po(){const e=b(null),n=[{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/><polyline points="21 15 16 10 5 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"图像生成",color:"#FF8800"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><polyline points="14 2 14 8 20 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><polyline points="10 9 9 9 8 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"会议记录",color:"#F53F3F"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"帮我写作",color:"#00B42A"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"翻译",color:"#165DFF"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 20V10M12 20V4M6 20v-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"数据分析",color:"#722ED1"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="21" y1="21" x2="16.65" y2="16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"深入研究",color:"#0FC6C2"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M19 10v2a7 7 0 0 1-14 0v-2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="12" y1="19" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="8" y1="23" x2="16" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"AI 播客",color:"#F5319D"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="18" cy="18" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="6" cy="6" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M13 6h3a2 2 0 0 1 2 2v7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 18H8a2 2 0 0 1-2-2V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"相似度识别",color:"#3491FA"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="4" width="16" height="16" rx="2" stroke="currentColor" stroke-width="2"/><path d="M9 9h6M9 13h6M9 17h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>',label:"PPT 生成",color:"#FF7D00"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23 7l-7 5 7 5V7z"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2"/></svg>',label:"视频生成",color:"#F53F3F"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 18V5l12-2v13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="6" cy="18" r="3" stroke="currentColor" stroke-width="2"/><circle cx="18" cy="16" r="3" stroke="currentColor" stroke-width="2"/></svg>',label:"音乐生成",color:"#165DFF"},{icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',label:"解题答疑",color:"#00B42A"}],t={icon:'<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="3" y="3" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/><rect x="14" y="3" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/><rect x="14" y="14" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/><rect x="3" y="14" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/></svg>',label:"更多",color:"#4E5969"},o=n.slice(0,5),r=n.slice(5);return{allSkills:n,activeSkill:e,visibleSkills:o,moreSkills:r,moreSkillItem:t,handleSkillClick:(c,s)=>{c.label==="相似度识别"?s&&s(c):e.value=c},removeSkill:()=>{e.value=null}}}const On={class:"input-box"},Vn={key:0,class:"file-list"},jn={class:"file-preview"},Pn=["src","onClick"],An={key:1,class:"file-icon"},Dn=["innerHTML"],zn=["innerHTML"],Wn=["innerHTML"],Un={key:2,class:"upload-mask"},Yn={key:0,class:"progress-ring"},Kn={width:"24",height:"24",viewBox:"0 0 24 24"},Xn=["stroke-dashoffset"],Zn={class:"progress-text"},qn={key:1,class:"parsing-text"},Gn={class:"file-info"},Jn=["title"],Qn={class:"file-meta"},eo=["onClick"],to=["innerHTML"],no={key:0,class:"skill-tag-wrapper"},oo={class:"skill-tag"},so=["innerHTML"],ro={class:"skill-tag-text"},io=["innerHTML"],lo=["value","disabled","placeholder"],ao={class:"input-actions"},co=["innerHTML"],uo=["innerHTML"],fo=["innerHTML"],ho=["innerHTML"],vo=["disabled"],po=["innerHTML"],go=["innerHTML"],wo=oe({__name:"ChatInput",props:{modelValue:{},isSending:{type:Boolean},isDeepThinking:{type:Boolean},activeSkill:{},uploadedFiles:{},isListening:{type:Boolean}},emits:["update:modelValue","send","stop","toggleDeepThink","toggleListening","removeSkill","fileSelect","removeFile","previewFile"],setup(e,{emit:n}){const t=n,o=b(null),r=()=>{o.value?.click()},d=v=>{v.shiftKey||(v.preventDefault(),t("send"))};return(v,c)=>(m(),C("div",On,[u("input",{type:"file",ref_key:"fileInputRef",ref:o,style:{display:"none"},onChange:c[0]||(c[0]=s=>t("fileSelect",s))},null,544),e.uploadedFiles.length>0?(m(),C("div",Vn,[(m(!0),C(Me,null,Je(e.uploadedFiles,s=>(m(),C("div",{key:s.id,class:"file-card"},[u("div",jn,[s.url&&s.type.startsWith("image/")?(m(),C("img",{key:0,src:s.url,alt:"preview",onClick:p=>t("previewFile",s),style:{cursor:"pointer"}},null,8,Pn)):(m(),C("div",An,[s.name.endsWith(".xlsx")||s.name.endsWith(".xls")?(m(),C("div",{key:0,style:{width:"24px",height:"24px"},innerHTML:a(R).excel},null,8,Dn)):s.name.endsWith(".mp3")||s.name.endsWith(".wav")||s.name.endsWith(".m4a")||s.type.startsWith("audio/")?(m(),C("div",{key:1,style:{width:"24px",height:"24px"},innerHTML:a(R).audio},null,8,zn)):(m(),C("div",{key:2,style:{width:"24px",height:"24px"},innerHTML:a(R).fileDefault},null,8,Wn))])),s.status!=="done"?(m(),C("div",Un,[s.status==="uploading"?(m(),C("div",Yn,[(m(),C("svg",Kn,[c[7]||(c[7]=u("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"rgba(255,255,255,0.3)","stroke-width":"2"},null,-1)),u("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"white","stroke-width":"2","stroke-dasharray":"62.83","stroke-dashoffset":62.83*(1-s.progress/100),transform:"rotate(-90 12 12)"},null,8,Xn)])),u("span",Zn,X(s.progress)+"%",1)])):s.status==="parsing"?(m(),C("div",qn," 解析中... ")):N("",!0)])):N("",!0)]),u("div",Gn,[u("div",{class:"file-name",title:s.name},X(s.name),9,Jn),u("div",Qn,X(s.status==="parsing"?"解析中...":s.size),1)]),u("button",{class:"remove-file-btn",onClick:p=>t("removeFile",s.id)},[u("span",{style:{width:"12px",height:"12px",display:"block"},innerHTML:a(R).closeSmall},null,8,to)],8,eo)]))),128))])):N("",!0),S(qe,{name:"fade-slide"},{default:$(()=>[e.activeSkill?(m(),C("div",no,[u("div",oo,[u("span",{class:"skill-tag-icon",innerHTML:e.activeSkill.icon},null,8,so),u("span",ro,X(e.activeSkill.label),1),u("span",{class:"skill-tag-close",onClick:c[1]||(c[1]=Ge(s=>t("removeSkill"),["stop"]))},[u("span",{style:{width:"12px",height:"12px",display:"block"},innerHTML:a(R).closeTiny},null,8,io)]),c[8]||(c[8]=u("div",{class:"skill-tooltip"},"点击退出技能 ESC",-1))])])):N("",!0)]),_:1}),u("input",{type:"text",value:e.modelValue,onInput:c[2]||(c[2]=s=>t("update:modelValue",s.target.value)),onKeyup:[Oe(d,["enter"]),c[3]||(c[3]=Oe(s=>t("removeSkill"),["esc"]))],disabled:e.isSending,placeholder:e.activeSkill?"请输入内容...":"发消息 or 输入“/”选择技能"},null,40,lo),u("div",ao,[u("button",{class:"icon-btn",onClick:r},[u("span",{style:{width:"20px",height:"20px",display:"block"},innerHTML:a(R).attachment},null,8,co)]),u("button",{class:I(["icon-btn deep-think-btn",{active:e.isDeepThinking}]),onClick:c[4]||(c[4]=s=>t("toggleDeepThink")),title:"深度思考"},[u("span",{style:{width:"20px",height:"20px",display:"block"},innerHTML:a(R).deepThink},null,8,uo)],2),c[9]||(c[9]=u("div",{class:"spacer"},null,-1)),u("button",{class:I(["icon-btn",{"is-listening":e.isListening}]),onClick:c[5]||(c[5]=s=>t("toggleListening")),title:"语音输入"},[e.isListening?(m(),C("span",{key:0,style:{width:"20px",height:"20px",display:"block"},innerHTML:a(R).micListening},null,8,fo)):(m(),C("span",{key:1,style:{width:"20px",height:"20px",display:"block"},innerHTML:a(R).micNormal},null,8,ho))],2),u("button",{class:"send-btn",onClick:c[6]||(c[6]=s=>e.isSending?t("stop"):t("send")),disabled:e.isSending},[e.isSending?(m(),C("span",{key:0,style:{width:"14px",height:"14px",display:"block"},innerHTML:a(R).sendSending},null,8,po)):(m(),C("span",{key:1,style:{width:"16px",height:"16px",display:"block"},innerHTML:a(R).sendNormal},null,8,go))],8,vo)])]))}}),Ao=nt(wo,[["__scopeId","data-v-c9f0a040"]]),st=new qt({html:!1,linkify:!0,typographer:!0,highlight:function(e,n){if(n&&je.getLanguage(n))try{return'<pre class="hljs"><code>'+je.highlight(e,{language:n,ignoreIllegals:!0}).value+"</code></pre>"}catch{}return'<pre class="hljs"><code>'+st.utils.escapeHtml(e)+"</code></pre>"}});function mo(e){return st.render(e||"")}const ko={class:"chat-wrapper"},yo={class:"avatar-container"},Co={class:"avatar"},xo={class:"message-content-wrapper"},bo={class:"sender-name"},_o={class:"content-bubble"},Eo=["innerHTML"],To={key:1},Lo={key:0,class:"message-actions"},Mo=["onClick"],So=["innerHTML"],Fo=["innerHTML"],Io=oe({__name:"MessageList",props:{messages:{}},emits:["regenerate"],setup(e,{expose:n,emit:t}){const o=e,r=t,d=b(null),v=()=>{he(()=>{d.value&&(d.value.scrollTop=d.value.scrollHeight)})},c=s=>{if(navigator.clipboard)navigator.clipboard.writeText(s).then(()=>{Z.success("复制成功")}).catch(()=>{Z.error("复制失败")});else{const p=document.createElement("textarea");p.value=s,document.body.appendChild(p),p.select();try{document.execCommand("copy"),Z.success("复制成功")}catch{Z.error("复制失败")}document.body.removeChild(p)}};return D(()=>o.messages.length,()=>{v()}),D(()=>o.messages[o.messages.length-1]?.content,()=>{v()}),n({scrollToBottom:v}),(s,p)=>(m(),C("div",ko,[u("div",{class:"message-list",ref_key:"chatContainerRef",ref:d},[(m(!0),C(Me,null,Je(e.messages,(f,w)=>(m(),C("div",{key:f.id,class:I(["message-row",f.role])},[u("div",yo,[u("div",Co,X(f.role==="user"?"你":"AI"),1)]),u("div",xo,[u("div",bo,X(f.role==="user"?"我":"驼人GPT"),1),u("div",_o,[f.role==="assistant"?(m(),C("div",{key:0,class:"markdown-body",innerHTML:a(mo)(f.content)},null,8,Eo)):(m(),C("div",To,X(f.content),1))]),f.role==="assistant"&&f.content?(m(),C("div",Lo,[u("button",{class:"action-btn",title:"复制",onClick:g=>c(f.content)},[u("span",{class:"icon",innerHTML:a(R).copy},null,8,So)],8,Mo),w===e.messages.length-1?(m(),C("button",{key:0,class:"action-btn",title:"重新生成",onClick:p[0]||(p[0]=g=>r("regenerate"))},[u("span",{class:"icon",innerHTML:a(R).regenerate},null,8,Fo)])):N("",!0)])):N("",!0)])],2))),128))],512)]))}}),Do=nt(Io,[["__scopeId","data-v-0d4e68ae"]]);export{Ao as C,En as E,vn as F,Do as M,Sn as a,Nn as b,Oo as c,Vo as d,No as e,jo as f,Po as g,R as i,Tn as t,Fn as u};
