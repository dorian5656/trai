import{d as O,u as W,bs as q,X as T,o as J,c as t,J as e,a4 as y,aF as s,aB as p,T as R,aW as V,K,W as m,a1 as X,C as k,e as l,I as j,ao as Q,a as Y,_ as Z}from"./index-DcelCsWV.js";import{u as ee}from"./github-dark-DOSha1VK.js";import{a as se,M as ie,C as x,E as oe,b as le,c as ne}from"./MessageList-DxGDl6d2.js";const te={class:"mobile-container"},ae={class:"sidebar-header"},de={class:"user-info"},ce={key:0,class:"avatar"},re=["src"],ue={key:1,class:"avatar"},ge={class:"username"},ve={class:"action-area"},pe={class:"recent-chats"},me=["onClick"],ke={class:"mobile-header"},be={class:"left"},Se={class:"right"},he={key:0,class:"user-actions"},_e={class:"mobile-content"},fe={key:0,class:"chat-layout"},Ce={class:"chat-footer"},Fe={key:1,class:"welcome-wrapper"},we={class:"input-area-wrapper"},Le={class:"skills-grid"},Me=["onClick"],Te=["innerHTML"],ye={class:"skill-label"},Re=O({__name:"Home",setup(Ve){Y();const a=W(),n=ee(),c=q(),{isListening:b,result:P,toggleListening:S}=se(),{uploadedFiles:u,showViewer:I,previewUrlList:B,initialIndex:D,handleFileSelect:h,removeFile:_,handlePreview:f,closeViewer:U,clearFiles:G}=le(),{allSkills:H,activeSkill:g,handleSkillClick:$,removeSkill:C}=ne(),r=k(""),F=k(null),v=k(!1);T(()=>n.messages,()=>{F.value?.scrollToBottom()},{deep:!0});const w=async()=>{const d=r.value.trim();if(!d&&u.value.length===0||n.isSending)return;const i=[...u.value],o=g.value;r.value="",G(),g.value=null,await n.sendMessage(d,i,o)},L=()=>{n.stopGenerating()},M=()=>{v.value=!v.value};T(P,d=>{d&&(r.value=d)}),J(()=>{c.init()});const E=()=>{a.openLoginModal()},N=()=>{c.logout()},z=d=>{d.label!=="ç›¸ä¼¼åº¦è¯†åˆ«"&&($(d),Q(()=>{const i=document.querySelector(".input-box input");i&&i.focus()}))};return(d,i)=>(l(),t("div",te,[e(a).isMobileSidebarOpen?(l(),t("div",{key:0,class:"sidebar-mask",onClick:i[0]||(i[0]=(...o)=>e(a).closeMobileSidebar&&e(a).closeMobileSidebar(...o))})):y("",!0),s("aside",{class:K(["mobile-sidebar",{open:e(a).isMobileSidebarOpen}])},[s("div",ae,[s("div",de,[e(c).avatar?(l(),t("div",ce,[s("img",{src:e(c).avatar,alt:"Avatar"},null,8,re)])):(l(),t("div",ue,"ðŸ‘©â€ðŸ’»")),s("span",ge,p(e(c).isLoggedIn?e(c).username:"é©¼äººGPT"),1)]),s("button",{class:"close-btn",onClick:i[1]||(i[1]=(...o)=>e(a).closeMobileSidebar&&e(a).closeMobileSidebar(...o))},"âœ•")]),s("div",ve,[s("button",{class:"new-chat-btn",onClick:i[2]||(i[2]=o=>e(n).createSession())},"ðŸ“ æ–°å¯¹è¯")]),s("div",pe,[i[7]||(i[7]=s("div",{class:"section-title"},"æœ€è¿‘å¯¹è¯",-1)),(l(!0),t(R,null,V(e(n).sessions,o=>(l(),t("div",{key:o.id,class:"chat-item",onClick:A=>{e(n).switchSession(o.id),e(a).closeMobileSidebar()}},p(o.title),9,me))),128))]),i[8]||(i[8]=s("div",{class:"sidebar-footer"},[s("button",{class:"footer-btn"},"â„¹ï¸ å…³äºŽé©¼äººGPT")],-1))],2),s("header",ke,[s("div",be,[s("button",{class:"icon-btn",onClick:i[3]||(i[3]=(...o)=>e(a).toggleMobileSidebar&&e(a).toggleMobileSidebar(...o))},"â˜°"),s("button",{class:"new-chat-pill",onClick:i[4]||(i[4]=o=>e(n).createSession())},"ðŸ“ æ–°å¯¹è¯")]),s("div",Se,[e(c).isLoggedIn?(l(),t("div",he,[s("button",{class:"logout-btn",onClick:N},"é€€å‡º")])):(l(),t("button",{key:1,class:"login-btn",onClick:E},"ç™»å½•"))])]),s("main",_e,[e(n).messages.length>0?(l(),t("div",fe,[m(ie,{messages:e(n).messages,ref_key:"messageListRef",ref:F},null,8,["messages"]),s("div",Ce,[m(x,{modelValue:r.value,"onUpdate:modelValue":i[5]||(i[5]=o=>r.value=o),"is-sending":e(n).isSending,"is-deep-thinking":v.value,"active-skill":e(g),"uploaded-files":e(u),"is-listening":e(b),onSend:w,onStop:L,onToggleDeepThink:M,onToggleListening:e(S),onRemoveSkill:e(C),onFileSelect:e(h),onRemoveFile:e(_),onPreviewFile:e(f)},null,8,["modelValue","is-sending","is-deep-thinking","active-skill","uploaded-files","is-listening","onToggleListening","onRemoveSkill","onFileSelect","onRemoveFile","onPreviewFile"])])])):(l(),t("div",Fe,[i[9]||(i[9]=s("h1",{class:"greeting"},"ä½ å¥½ï¼Œæˆ‘æ˜¯é©¼äººGPT",-1)),s("div",we,[m(x,{modelValue:r.value,"onUpdate:modelValue":i[6]||(i[6]=o=>r.value=o),"is-sending":e(n).isSending,"is-deep-thinking":v.value,"active-skill":e(g),"uploaded-files":e(u),"is-listening":e(b),onSend:w,onStop:L,onToggleDeepThink:M,onToggleListening:e(S),onRemoveSkill:e(C),onFileSelect:e(h),onRemoveFile:e(_),onPreviewFile:e(f)},null,8,["modelValue","is-sending","is-deep-thinking","active-skill","uploaded-files","is-listening","onToggleListening","onRemoveSkill","onFileSelect","onRemoveFile","onPreviewFile"])]),s("div",Le,[(l(!0),t(R,null,V(e(H),o=>(l(),t("div",{key:o.label,class:"skill-item",onClick:A=>z(o)},[s("div",{class:"skill-icon-wrapper",style:j({color:o.color})},[s("span",{class:"skill-icon",innerHTML:o.icon},null,8,Te)],4),s("span",ye,p(o.label),1)],8,Me))),128))])]))]),e(I)?(l(),X(e(oe),{key:1,"url-list":e(B),"initial-index":e(D),onClose:e(U)},null,8,["url-list","initial-index","onClose"])):y("",!0)]))}}),Be=Z(Re,[["__scopeId","data-v-304e8a99"]]);export{Be as default};
